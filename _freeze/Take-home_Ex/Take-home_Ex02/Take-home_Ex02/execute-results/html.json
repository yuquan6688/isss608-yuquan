{
  "hash": "05c7f08530ea86d28888cfd6f14fd178",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 2\"\nsubtitle: \" VAST Challenge 2025 Mini-Challenge 3\"\nauthor: \"Li Yuquan\"\ndescription: \"\"\ndate: \"May 11, 2025\"\ndate-modified: \"last-modified\"\nformat: html\nimage: images/fm.png\neditor: visual\n\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# 1 Overview\n\nIn this exercise, we will be tacking [Mini-case 3](https://vast-challenge.github.io/2025/MC3.html) of [VAST Challenge 2025](https://vast-challenge.github.io/2025/index.html).\n\n## 1.1 Background\n\nOver the past decade, the community of Oceanus has faced numerous transformations and challenges evolving from its fishing-centric origins. Following major crackdowns on illegal fishing activities, suspects have shifted investments into more regulated sectors such as the ocean tourism industry, resulting in growing tensions. This increased tourism has recently attracted the likes of international pop star Sailor Shift, who announced plans to film a music video on the island.\n\nClepper Jessen, a former analyst at FishEye and now a seasoned journalist for the Hacklee Herald, has been keenly observing these rising tensions. Recently, he turned his attention towards the temporary closure of Nemo Reef. By listening to radio communications and utilizing his investigative tools, Clepper uncovered a complex web of expedited approvals and secretive logistics. These efforts revealed a story involving high-level Oceanus officials, Sailor Shift’s team, local influential families, and local conservationist group The Green Guardians, pointing towards a story of corruption and manipulation.\n\nMy task is to develop new and novel visualizations and visual analytics approaches to help Clepper get to the bottom of this story.\n\n## 1.2 Tasks and Questions\n\nClepper diligently recorded all intercepted radio communications over the last two weeks. With the help of his intern, they have analyzed their content to identify important events and relationships between key players. The result is a knowledge graph describing the last two weeks on Oceanus. Clepper and his intern have spent a large amount of time generating this knowledge graph, and they would now like some assistance using it to answer the following questions.\n\n1.  Clepper found that messages frequently came in at around the same time each day.\n\n    1.  Develop a graph-based visual analytics approach to identify any daily temporal patterns in communications.\n\n    2.  How do these patterns shift over the two weeks of observations?\n\n    3.  Focus on a specific entity and use this information to determine who has influence over them.\n\n2.  Clepper has noticed that people often communicate with (or about) the same people or vessels, and that grouping them together may help with the investigation.\n\n    1.  Use visual analytics to help Clepper understand and explore the interactions and relationships between vessels and people in the knowledge graph.\n\n    2.  Are there groups that are more closely associated? If so, what are the topic areas that are predominant for each group?\n\n        -   For example, these groupings could be related to: Environmentalism (known associates of Green Guardians), Sailor Shift, and fishing/leisure vessels.\n\n3.  It was noted by Clepper’s intern that some people and vessels are using pseudonyms to communicate.\n\n    1.  Expanding upon your prior visual analytics, determine who is using pseudonyms to communicate, and what these pseudonyms are.\n\n        -   Some that Clepper has already identified include: “Boss”, and “The Lookout”, but there appear to be many more.\n\n        -   To complicate the matter, pseudonyms may be used by multiple people or vessels.\n\n    2.  Describe how your visualizations make it easier for Clepper to identify common entities in the knowledge graph.\n\n    3.  How does your understanding of activities change given your understanding of pseudonyms?\n\n4.  Clepper suspects that Nadia Conti, who was formerly entangled in an illegal fishing scheme, may have continued illicit activity within Oceanus.\n\n    1.  Through visual analytics, provide evidence that Nadia is, or is not, doing something illegal.\n\n    2.  Summarize Nadia’s actions visually. Are Clepper’s suspicions justified?\n\n## 1.3 The Data\n\nWe will use the dataset provided by VAST Challenge.This report utilizes two core datasets: MC3_graph.json, which encodes the knowledge graph of communications, events, and relationships; and MC3_schema.json, which defines the structure, subtypes, and attributes of each node and edge type within the graph.\n\n## 1.4 Methodology\n\n# 2 Setup\n\n## 2.1 Loading Packages\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(\n  jsonlite,\n  tidyverse,\n  ggtext,\n  knitr,\n  lubridate,\n  patchwork,\n  ggraph,\n  tidygraph,\n  igraph,\n  dplyr,\n  ggiraph\n)\n```\n:::\n\n\n\n## 2.2 Importing data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_g <- fromJSON(\"data/MC3_graph.json\")\ndata_s <- fromJSON(\"data/MC3_schema.json\")\n```\n:::\n\n\n\n## 2.3 Data Overview\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data_g)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           Length Class      Mode   \ndirected    1     -none-     logical\nmultigraph  1     -none-     logical\ngraph       4     -none-     list   \nnodes      31     data.frame list   \nedges       5     data.frame list   \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(data_g)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 5\n $ directed  : logi TRUE\n $ multigraph: logi FALSE\n $ graph     :List of 4\n  ..$ mode        : chr \"static\"\n  ..$ edge_default: Named list()\n  ..$ node_default: Named list()\n  ..$ name        : chr \"VAST_MC3_Knowledge_Graph\"\n $ nodes     :'data.frame':\t1159 obs. of  31 variables:\n  ..$ type             : chr [1:1159] \"Entity\" \"Entity\" \"Entity\" \"Entity\" ...\n  ..$ label            : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ name             : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ sub_type         : chr [1:1159] \"Person\" \"Person\" \"Person\" \"Person\" ...\n  ..$ id               : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ timestamp        : chr [1:1159] NA NA NA NA ...\n  ..$ monitoring_type  : chr [1:1159] NA NA NA NA ...\n  ..$ findings         : chr [1:1159] NA NA NA NA ...\n  ..$ content          : chr [1:1159] NA NA NA NA ...\n  ..$ assessment_type  : chr [1:1159] NA NA NA NA ...\n  ..$ results          : chr [1:1159] NA NA NA NA ...\n  ..$ movement_type    : chr [1:1159] NA NA NA NA ...\n  ..$ destination      : chr [1:1159] NA NA NA NA ...\n  ..$ enforcement_type : chr [1:1159] NA NA NA NA ...\n  ..$ outcome          : chr [1:1159] NA NA NA NA ...\n  ..$ activity_type    : chr [1:1159] NA NA NA NA ...\n  ..$ participants     : int [1:1159] NA NA NA NA NA NA NA NA NA NA ...\n  ..$ thing_collected  :'data.frame':\t1159 obs. of  2 variables:\n  .. ..$ type: chr [1:1159] NA NA NA NA ...\n  .. ..$ name: chr [1:1159] NA NA NA NA ...\n  ..$ reference        : chr [1:1159] NA NA NA NA ...\n  ..$ date             : chr [1:1159] NA NA NA NA ...\n  ..$ time             : chr [1:1159] NA NA NA NA ...\n  ..$ friendship_type  : chr [1:1159] NA NA NA NA ...\n  ..$ permission_type  : chr [1:1159] NA NA NA NA ...\n  ..$ start_date       : chr [1:1159] NA NA NA NA ...\n  ..$ end_date         : chr [1:1159] NA NA NA NA ...\n  ..$ report_type      : chr [1:1159] NA NA NA NA ...\n  ..$ submission_date  : chr [1:1159] NA NA NA NA ...\n  ..$ jurisdiction_type: chr [1:1159] NA NA NA NA ...\n  ..$ authority_level  : chr [1:1159] NA NA NA NA ...\n  ..$ coordination_type: chr [1:1159] NA NA NA NA ...\n  ..$ operational_role : chr [1:1159] NA NA NA NA ...\n $ edges     :'data.frame':\t3226 obs. of  5 variables:\n  ..$ id         : chr [1:3226] \"2\" \"3\" \"5\" \"3013\" ...\n  ..$ is_inferred: logi [1:3226] TRUE FALSE TRUE TRUE TRUE TRUE ...\n  ..$ source     : chr [1:3226] \"Sam\" \"Sam\" \"Sam\" \"Sam\" ...\n  ..$ target     : chr [1:3226] \"Relationship_Suspicious_217\" \"Event_Communication_370\" \"Event_Assessment_600\" \"Relationship_Colleagues_430\" ...\n  ..$ type       : chr [1:3226] NA \"sent\" NA NA ...\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnodes <- data_g$nodes\nedges <- data_g$edges\n```\n:::\n\n\n\n# 3 Data Wrangling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnodes <- nodes %>%\n  mutate(\n    timestamp = ymd_hms(timestamp, quiet = TRUE),\n    date = as.Date(timestamp),\n    start_date = ymd(start_date, quiet = TRUE),\n    end_date = ymd(end_date, quiet = TRUE),\n    submission_date = ymd(submission_date, quiet = TRUE),\n    hour = hour(timestamp),\n    weekday = wday(timestamp, label = TRUE)\n  )\n\n\ncomm_nodes <- nodes %>%\n  filter(sub_type == \"Communication\", !is.na(timestamp))\n```\n:::\n\n\n\n# plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pp1：折线图 - 每天每小时通信趋势\npp1 <- comm_nodes %>%\n  count(date, hour) %>%\n  ggplot(aes(x = hour, y = n, group = date, color = date)) +\n  geom_line(size = 1) +\n  labs(title = \"Hourly Communication Patterns per Day\",\n       x = \"Hour of Day\", y = \"Number of Messages\") +\n  theme_minimal()\n\n# pp2：热图 - 每天每小时通信数量\npp2 <- comm_nodes %>%\n  count(date, hour) %>%\n  ggplot(aes(x = date, y = hour, fill = n)) +\n  geom_tile(color = \"white\") +\n  scale_fill_viridis_c(option = \"C\") +\n  labs(title = \"Message Volume Heatmap\",\n       x = \"Date\", y = \"Hour\", fill = \"Count\") +\n  theme_minimal()\n\n# pp3：柱状图 - 每小时通信数量（不同日期）\nhourly_counts <- comm_nodes %>%\n  group_by(date, hour) %>%\n  summarise(count = n(), .groups = \"drop\")\n\npp3 <- ggplot(hourly_counts, aes(x = factor(hour), y = count, fill = factor(date))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(\n    title = \"Hourly Communication Volume by Date\",\n    x = \"Hour of Day (0–23)\",\n    y = \"Number of Communications\",\n    fill = \"Date\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n# pp4：影响力网络图\nsent_edges <- edges %>%\n  filter(type == \"sent\") %>%\n  select(source_entity = source, event = target)\n\nreceived_edges <- edges %>%\n  filter(type == \"received\") %>%\n  select(event = source, target_entity = target)\n\ncomm_edges <- sent_edges %>%\n  inner_join(received_edges, by = \"event\") %>%\n  select(source = source_entity, target = target_entity)\n\nentity_nodes <- nodes %>%\n  filter(type == \"Entity\") %>%\n  select(id, label)\n\ncomm_graph <- tbl_graph(nodes = entity_nodes, edges = comm_edges, directed = TRUE) %>%\n  mutate(\n    degree = centrality_degree(mode = \"in\"),\n    pagerank = centrality_pagerank()\n  )\n\nfocus_entity <- \"Boss\"\nfocus_index <- which(V(comm_graph)$label == focus_entity)\n\nego_graph <- make_ego_graph(comm_graph, order = 1, nodes = focus_index, mode = \"all\")[[1]]\n\npp4 <- ggraph(ego_graph, layout = \"kk\") +\n  geom_edge_link(arrow = arrow(length = unit(3, 'mm')), end_cap = circle(3, 'mm')) +\n  geom_node_point(aes(size = pagerank), color = \"steelblue\") +\n  geom_node_text(aes(label = label), repel = TRUE) +\n  labs(title = paste(\"Influence Network for:\", focus_entity)) +\n  theme_graph()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(pp1+pp2)/pp3/pp4\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex02_files/figure-html/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "Take-home_Ex02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}